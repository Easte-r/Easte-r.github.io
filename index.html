<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title><?=$shareData['title']?></title>
    <meta itemprop="name" content="<?=$shareData['qqTitle']?>" />
    <meta
      itemprop="description"
      name="description"
      content="<?=$shareData['qqContent']?>"
    />
    <meta
      itemprop="image"
      content="<?=Manager::get(ResourceID::GRAB_SHARED_ICON)?>"
    />

    <meta property="og:url" content="<?=$shareData['url'];?>" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="<?=$shareData['facebookTitle']?>" />
    <meta
      property="og:description"
      content="<?=$shareData['facebookContent']?>"
    />
    <meta
      property="og:image"
      content="<?=Manager::get(ResourceID::GRAB_SHARED_ICON)?>"
    />

    <link href="" rel="shortcut icon" />
    <meta name="keywords" content="全民Party" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <meta name="format-detection" content="telephone=no" />
    <meta name="title" content="<?=$shareData['qqTitle']?>" />
    <meta name="msapplication-tooltip" content="<?=$shareData['qqTitle']?>" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <!-- TODO add manifest here -->
    <!-- Add to home screen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="observe test" />
    <meta name="msapplication-TileColor" content="#2F3BA2" />
    <!-- 针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓 -->
    <meta name="HandheldFriendly" content="true" />
    <!-- 微软的老式浏览器 -->
    <meta name="MobileOptimized" content="320" />
    <!-- uc强制竖屏 -->
    <meta name="screen-orientation" content="portrait" />
    <!-- QQ强制竖屏 -->
    <meta name="x5-orientation" content="portrait" />
    <!-- windows phone 点击无高光 -->
    <meta name="msapplication-tap-highlight" content="no" />
    <!--转码申明-->
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <script>
      var width = Math.min(
        window.innerWidth || 375,
        document.documentElement.clientWidth
      );
      var height = Math.min(
        window.innerHeight || 667,
        document.documentElement.clientHeight
      );
      var devWidth = height > width ? width : height;
      if (devWidth > 750) devWidth = 750; //取短后是否会大于750

      var html = document.getElementsByTagName("html")[0];
      var value = Math.round(devWidth / (750 / 100));
      html.style.fontSize = value + "px"; // document.documentElement.style.fontSize 某些android手机（SAMSUNG）会失效

      // 适配 某些android手机（SAMSUNG） 更改系统字体大小导致布局不准确问题
      var setFontSize = parseFloat(value);
      var computeFontSize = parseFloat(window.getComputedStyle(html).fontSize); // 获取计算后真实font-size
      if (setFontSize !== computeFontSize) {
        html.style.fontSize =
          (setFontSize * setFontSize) / computeFontSize + "px"; // 根据比例重新设置font-size 后重新计算
      }
    </script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script> -->
    <!-- <script>
      (function(d, s, id) {
        var js,
          fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s);
        js.id = id;
        //下面填入一个你的app id，如果还没，请在fb开发者平台注册一个
        js.src =
          "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=166193257232747";
        fjs.parentNode.insertBefore(js, fjs);
      })(document, "script", "facebook-jssdk");
    </script> -->

    <script src="https://cdn.bootcss.com/vConsole/3.3.0/vconsole.min.js"></script>
    <script>
      new VConsole();
    </script>
    <!-- <script>
      var _mtac = {};
      (function() {
        var mta = document.createElement("script");
        mta.src = "//pingjs.qq.com/h5/stats.js?v2.0.4";
        mta.setAttribute("name", "MTAH5");
        mta.setAttribute("sid", "500707672");
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(mta, s);
      })();
		</script> -->
    <!-- <script type="text/javascript">
      var cnzz_protocol =
        "https:" == document.location.protocol ? "https://" : "http://";
      document.write(
        unescape(
          "%3Cspan id='cnzz_stat_icon_1278528480'%3E%3C/span%3E%3Cscript src='" +
            cnzz_protocol +
            "s4.cnzz.com/z_stat.php%3Fid%3D1278528480' type='text/javascript'%3E%3C/script%3E"
        )
      );
		</script> -->
    <script type="text/javascript">
      var cnzz_protocol =
        "https:" == document.location.protocol ? "https://" : "http://";
      document.write(
        unescape(
          "%3Cspan style='display:none' id='cnzz_stat_icon_1278528480'%3E%3C/span%3E%3Cscript src='" +
            cnzz_protocol +
            "s4.cnzz.com/z_stat.php%3Fid%3D1278528480%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"
        )
      );
    </script>
    <style>
      * {
        vertical-align: baseline;
        font-weight: inherit;
        font-family: inherit;
        font-style: inherit;
        font-size: 100%;
        outline: 0;
        padding: 0;
        margin: 0;
        border: 0;
        line-height: 1;
        box-sizing: border-box;
        -webkit-box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
        width: 100%;
      }
      @font-face {
        font-family: "amatic";
        src: url("./amatic.woff") format("woff2"),
          url("mywebfont.eot?#iefix") format("embedded-opentype"),
          url("mywebfont.woff2") format("woff2"),
          url("mywebfont.woff") format("woff"),
          url("mywebfont.ttf") format("truetype"),
          url("mywebfont.svg#mywebfontregular") format("svg");
      }
			#ddd{
				font-family: 'amatic'
			}
    </style>
    <!-- <script src="./html2canvas.js"></script> -->
    <script src="./html2canvas.min.js"></script>
  </head>
  <body>
    <div id="app">
      测测试试
      <!-- <img
        src="http://forest-mt.seekrtech.com/images/og/en.jpg"
        alt=""
        height="100"
        width="100"
        style="display: block;"
      /> -->
      <img
        src="./share_bg1.png"
        alt=""
        height="100"
        width="100"
        style="display: block;"
      />
      <img
        src="./share_bg1.png"
        alt=""
        height="375"
        width="375"
        style="display: block;"
      />

      <a id="abc" href="#" onclick="testabc()">分享</a>
      <!-- <div style="height: 500px;width: 100% ;background-color: aqua"></div>
      <div style="height: 500px;width: 100% ;background-color: red"></div> -->
      <div id="ddd">ABCDEFGH</div>
    </div>
    <!-- <script>
      // category：事件类别，必填项，表示事件发生在谁身上，如“视频”、“小说”、“轮显层”等等。
      // action：事件操作，必填项，表示访客跟元素交互的行为动作，如"播放"、"收藏"、"翻层"等等。
      // label：事件标签，选填项，用于更详细的描述事件，从各个方面都可以，比如具体是哪个视频，哪部小说，翻到了第几层等等。
      // value：事件值，选填项，整数型，用于填写打分型事件的分值，加载时间型事件的时长，订单型事件的价格等等。
      // nodeid：div元素id，选填项，填写网页中的div元素id值，用于在“用户视点”功能上重绘元素的事件发生情况。

      function testabc() {
        html2canvas(document.getElementById("app"), {
          allowTaint: true,
          // height:250/2,
          // width:window.innerWidth/2
          // allowTaint: false, // 是否允许跨域图像污染画布
          // useCORS:true,
          // taintTest:false,
          ignoreElements: element => {
            if (element.id === "abc") return true;
            if (element.id === "ddd") return true;
          }
        }).then(canvas => {
          var image = new Image();
          // image.height=250;
          // image.width=window.innerWidth;
          // image.src = canvas.toDataURL("image/jpeg",.8);
          console.log(image.src);
          canvas.toBlob(blob => {
            console.log(blob);
            image.src = window.URL.createObjectURL(blob);
          }, "image/jpeg");
          document.body.appendChild(image);
        });
      }
    </script> -->

    <script>
      // function testabc() {
      //   _czc.push(["_trackEvent", "分享", "分享", "分享", "", "dafen"]);
      // }

      

      // var aa = encodeURIComponent(
      //   "https://new-test-ck.haochang.tv/share/feed?shareTo=qq&language=cn&feedId=5fa30e32-1bca-4933-b9c7-5c377ccf42bf"
      // );
      // var aa = encodeURIComponent("http://192.168.2.191:5501/hd/test.html");

      // facebook 网页
      // document.location.href = "https://www.facebook.com/sharer/sharer.php?u="+aa;
      // 跳转 messengerApp
      // window.location.href = "fb-messenger://share/?link=" + aa;
      // 跳转 twitterApp
      // window.location.href='https://twitter.com/intent/tweet?url='+aa;
      // 跳转 lineApp
      // window.location.href = "https://line.me/R/msg/text/?" + aa;
      // 打开instagram
      window.location.href = "instagram://";
 
    </script>
  </body>
</html>
